-- === Khai báo dịch vụ ===
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- === Cấu hình ===
local SeedNames = {"Kaitun", "A-X", "A-Z"}  -- Tên hạt giống bạn muốn auto
local ActionDelay = 1.5  -- Thời gian delay giữa hành động (giảm lag và tránh bị phát hiện)
local MaxSeedToBuy = 5  -- Mua tối đa từng loại hạt giống khi thiếu

-- === Helper function kiểm tra hạt giống có trong balo hay không ===
local function HasSeed(seedName)
    return player.Backpack:FindFirstChild(seedName) or player.Character:FindFirstChild(seedName)
end

-- === Mua hạt giống ===
local function BuySeed(seedName, quantity)
    quantity = quantity or 1
    local buyEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("BuySeed")
    for i = 1, quantity do
        buyEvent:FireServer(seedName)
        wait(0.5)
    end
end

-- === Trồng cây ===
local function PlantSeed(seedName)
    local plantEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("PlantSeed")
    plantEvent:FireServer(seedName)
end

-- === Tưới nước và bón phân ===
local function UseItem(itemName)
    local useEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("UseItem")
    useEvent:FireServer(itemName)
end

-- === Thu hoạch cây ===
local function Harvest()
    local harvestEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("Harvest")
    harvestEvent:FireServer()
end

-- === Mở rộng đất ===
local function ExpandLand()
    local expandEvent = ReplicatedStorage:WaitForChild("Events"):WaitForChild("ExpandLand")
    expandEvent:FireServer()
end

-- === Vòng lặp auto chính ===
while true do
    -- 1. Mua hạt giống nếu thiếu
    for _, seed in ipairs(SeedNames) do
        if not HasSeed(seed) then
            BuySeed(seed, MaxSeedToBuy)
            wait(ActionDelay)
        end
    end

    -- 2. Trồng cây với tất cả hạt giống có trong balo
    for _, seed in ipairs(SeedNames) do
        if HasSeed(seed) then
            PlantSeed(seed)
            wait(ActionDelay)
        end
    end

    -- 3. Tưới nước và bón phân
    UseItem("WateringCan")
    wait(1)
    UseItem("Fertilizer")
    wait(1)

    -- 4. Thu hoạch cây đã chín
    Harvest()
    wait(ActionDelay)

    -- 5. Mở rộng đất nếu đủ tiền (game tự kiểm tra)
    ExpandLand()
    wait(ActionDelay)

    wait(3) -- Delay trước khi vòng lặp tiếp theo
end
