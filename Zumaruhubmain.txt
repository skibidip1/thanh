-- === Khai báo dịch vụ ===
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- === Cấu hình ===
local SeedNames = {"Kaitun", "A-X", "A-Z"}  -- Tên hạt giống muốn auto
local ActionDelay = 2  -- Delay giữa hành động để tránh lag và bị phát hiện
local MaxSeedToBuy = 5  -- Số lượng mua khi thiếu

-- === Tìm RemoteEvent (thay đúng tên trong game) ===
local EventsFolder = ReplicatedStorage:WaitForChild("Events")

local BuySeedEvent = EventsFolder:WaitForChild("BuySeed") -- Thay tên cho đúng
local PlantSeedEvent = EventsFolder:WaitForChild("PlantSeed")
local UseItemEvent = EventsFolder:WaitForChild("UseItem")
local HarvestEvent = EventsFolder:WaitForChild("Harvest")
local ExpandLandEvent = EventsFolder:WaitForChild("ExpandLand")

-- === Kiểm tra hạt giống trong balo ===
local function HasSeed(seedName)
    return player.Backpack:FindFirstChild(seedName) or player.Character:FindFirstChild(seedName)
end

-- === Mua hạt giống ===
local function BuySeed(seedName, quantity)
    quantity = quantity or 1
    print("Đang mua hạt:", seedName, "x"..quantity)
    for i = 1, quantity do
        BuySeedEvent:FireServer(seedName)
        wait(0.5)
    end
    print("Mua xong hạt:", seedName)
end

-- === Trồng cây ===
local function PlantSeed(seedName)
    print("Trồng hạt:", seedName)
    PlantSeedEvent:FireServer(seedName)
end

-- === Tưới nước và bón phân ===
local function UseItem(itemName)
    print("Sử dụng:", itemName)
    UseItemEvent:FireServer(itemName)
end

-- === Thu hoạch cây ===
local function Harvest()
    print("Thu hoạch cây")
    HarvestEvent:FireServer()
end

-- === Mở rộng đất ===
local function ExpandLand()
    print("Mở rộng đất")
    ExpandLandEvent:FireServer()
end

-- === Vòng lặp auto chính ===
while true do
    -- Mua hạt nếu thiếu
    for _, seed in ipairs(SeedNames) do
        if not HasSeed(seed) then
            BuySeed(seed, MaxSeedToBuy)
            wait(ActionDelay)
        end
    end

    -- Trồng hạt có trong balo
    for _, seed in ipairs(SeedNames) do
        if HasSeed(seed) then
            PlantSeed(seed)
            wait(ActionDelay)
        end
    end

    -- Tưới nước và bón phân
    UseItem("WateringCan")
    wait(1)
    UseItem("Fertilizer")
    wait(1)

    -- Thu hoạch
    Harvest()
    wait(ActionDelay)

    -- Mở rộng đất
    ExpandLand()
    wait(ActionDelay)

    wait(3) -- Delay vòng lặp tiếp theo
end
